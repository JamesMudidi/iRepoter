<!DOCTYPE html>
<html >
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<title>iReporter | Signup</title>
		<link rel="stylesheet" href="css/style.css">
	</head>

	<body>
		<div class="login-page">
			<div class="form">
			<div class="info">Welcome iReporter</div>
			<div class="heading">Register and Let's Get Started</div>
				<form class="login-form">
					<input type="text" id="firstname" placeholder="First Name (Required)" required=""/>
					<input type="text" id="lastname" placeholder="Last Name (Required)" required=""/>
					<input type="text" id="othernames" placeholder="Other Names (Optional)"/>
					<input type="text" id="username" placeholder="Username (Required)" required=""/>
					<input type="email" id="email" placeholder="Email (Required)" required=""/>
					<input type="text" id="phonenumber" placeholder="Phone Contact (Required)" required=""/>
					<input type="password" id="password" placeholder="Password (Required)" required=""/>
					<button  id="signup">Submit</button>
					<p class="message">Already registered? <a href="index.html">Login Here</a></p>
				</form>
			</div>
		</div>
		
    <script>
		const url = 'https://irepoter-v3.herokuapp.com/api/v2/auth/signup';
	//	const url = 'http://127.0.0.1:5000/api/v2/auth/signup';

		document.getElementById('signup')
		.addEventListener('click', signup);
		
		function signup(e){
		e.preventDefault();
		let firstname = document.getElementById('firstname').value;
		let lastname = document.getElementById('lastname').value;
		let othernames = document.getElementById('othernames').value;
		let username = document.getElementById('username').value;
		let email = document.getElementById('email').value;
		let password = document.getElementById('password').value;
		let phonenumber = document.getElementById('phonenumber').value;
  
		fetch(url, {
		method: 'POST',
		mode: 'cors',
		headers: {"Accept":"application/json", "Content-type":"application/json", "Access-Control-Allow-Origin": "*"},
		body: JSON.stringify({
		firstname: firstname,
		lastname: lastname,
		othernames: othernames,
		username: username,
		email: email,
		password: password,
		phoneNumber: phonenumber})
		})
		.then(function (response){
		if (response.status === 201){
		window.location.href = 'index.html';
		}
		return response.json();
		})
		.then(function (response){
		if (response.status === 400){
		alert("Please fill out all the fields correctly");}
        else{alert(response.message);}
		})
		.catch((err) => console.log(err))
		}
	</script>
		
	</body>
</html>
